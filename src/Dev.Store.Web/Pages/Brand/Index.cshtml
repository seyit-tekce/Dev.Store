@page
@using Dev.Store.Dtos;
@using Dev.Store.Permissions
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Mvc.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Layout
@using Dev.Store.Web.Pages.Dev.Store.Brand
@using Dev.Store.Localization
@using Dev.Store.Web.Menus
@model IndexModel
@inject IPageLayout PageLayout
@inject IHtmlLocalizer<StoreResource> L
@inject IAuthorizationService Authorization
@{
    PageLayout.Content.Title = L["Brand"].Value;
    PageLayout.Content.BreadCrumb.Add(L["Menu:Brand"].Value);
    PageLayout.Content.MenuItemName = StoreMenus.Brand;
}

@section scripts
    {
    <abp-script src="/Pages/Brand/index.js" />
}
@section styles
    {
    <abp-style src="/Pages/index.css" />
}

<abp-card>
    <abp-card-header>
        <abp-row>
            <abp-column size-md="_6">
                <abp-card-title>@L["Brand"]</abp-card-title>
            </abp-column>
            <abp-column size-md="_6" class="text-end">
                @if (await Authorization.IsGrantedAsync(StorePermissions.Brand.Create))
                {
                    <abp-button id="NewBrandButton"
                            text="@L["CreateBrand"].Value"
                            icon="plus"
                            button-type="Primary" data-original-title="@L["CreateBrand"].Value" data-task="insert" data-modal="true" data-href="@(Url.Action("CreateModal","Brand",new {}))" data-grid="brands" />
                }
            </abp-column>
        </abp-row>
    </abp-card-header>
    <abp-card-body>
        @(
            Html.Kendo().Grid<BrandDto>()
                        .Name("brands")
                        .Columns(columns =>
                        {

                            columns.Bound(p => p.Name).Title(L["BrandName"].Value);
                            columns.Bound(p => p.Code).Title(L["BrandCode"].Value);
                            columns.Bound(p => p.Description).Title(L["BrandDescription"].Value);
                        })
                        .ToolBar(tools =>
                        {
                tools.Custom().Text("<i class='fa fa-edit' data-original-title='Düzenle'></i>").HtmlAttributes(new Dictionary<string, object> { { "data-method", "get" }, { "data-href",Url.Action("EditModal", "Brand")} });

                tools.Search().Text(" ");
                tools.Excel().Text(" ");
                tools.Pdf().Text(" ");
            })
            .Height(650)
            .Scrollable(x => x.Height(650))
            .Sortable()
            .Selectable()
            .Pageable(x => x.Refresh(true))
            .Filterable()
            .DataSource(dataSource =>
            dataSource
            .WebApi()
            .Model(model =>
            {
                model.Id(p => p.Id);
            })
            .Read(read => read.Url("/api/app/brand/data-source"))
            ).Deferred()
            )



    </abp-card-body>
</abp-card>
